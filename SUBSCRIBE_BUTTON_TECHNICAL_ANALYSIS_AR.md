# ๐ ุชุญููู ุชููู ุดุงูู - ุฒุฑ ุงูุงุดุชุฑุงู (Subscribe) ูู ุชุทุจูู BeSmile AI

**ุชุงุฑูุฎ ุงูุชุญููู:** 16 ููุงูุฑ 2026  
**ุงูุฅุตุฏุงุฑ:** 1.0  
**ุงููุบุฉ:** ุงูุนุฑุจูุฉ ููุท  
**ุงููุฏู:** ุชูุซูู ุดุงูู ูุชุฏูู ุงูุงุดุชุฑุงู ูู ุงูุจุฏุงูุฉ ููููุงูุฉ

---

## โ 1. ููุงู ุฒุฑ ุงูุงุดุชุฑุงู ููุนูููุงุช ุงูููู

### ๐ ูููุน ุงูุฒุฑ

**ุงุณู ุงูุตูุญุฉ:** ุตูุญุฉ ุงุฎุชูุงุฑ ุงูุฎุทุฉ (Subscription Landing Page)  
**ุงุณู ุงูููู:** `app/clinic/subscribe.tsx`  
**ุงูุญุฌู:** 746 ุณุทุฑ  
**ุงููุบุฉ:** TypeScript + React Native

### ๐ฏ ููุงู ุธููุฑ ุงูุฒุฑ

ุงูุฒุฑ ูุธูุฑ ูู ุตูุญุฉ ุงุฎุชูุงุฑ ุงูุฎุทุฉ ุงูุฑุฆูุณูุฉ ุจุนุฏ ุงูุถุบุท ุนูู "ุงูุงุดุชุฑุงู ุงูุขู" ูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ ุฃู ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ.

**ุฃููุงุน ุงูุฃุฒุฑุงุฑ:**
- โ **ุฒุฑ ุงูุงุดุชุฑุงู ุงูุฑุฆูุณู:** `Start Subscription โ $19.99/month` ุฃู `Start Subscription โ $230.88/year`
- โ **ุฒุฑ ุบููุฑ ุงูุฎุทุฉ:** ูุธูุฑ ุฅุฐุง ูุงู ุงููุณุชุฎุฏู ูุดุชุฑู ุจุงููุนู
- โ **ุฒุฑ ุฅุฒุงูุฉ ุงูุงุดุชุฑุงู:** ููุงุฎุชุจุงุฑ (ูู ุจูุฆุฉ ุงูู Development)

### ๐ง ุงูุญุฏุซ ุงููุฑุชุจุท ุจุงูุฒุฑ

**ุฏุงูุฉ ุงูุญุฏุซ ุงูุฑุฆูุณูุฉ:**
```typescript
const handleSubscribe = async (plan: PlanOption) => {
  // ูู ุงูููู: app/clinic/subscribe.tsx
  // ุงูุณุทูุฑ: 130-190
}
```

**ูุง ุงูุฐู ูุญุฏุซ ุนูุฏ ุงูุถุบุท:**
1. ุงูุชุญูู ูู ุฃู ุงููุณุชุฎุฏู ููุณ ูุถุบุท ุฒุฑุงุฑ ูุฑุชูู (ุชุฌูุจ ุงูุชูุฑุงุฑ)
2. ุฅุฐุง ูุงู ุงููุณุชุฎุฏู ูุดุชุฑู ุจุงููุนู โ ุงูุฐูุงุจ ุฅูู ุตูุญุฉ ุชุฑููุฉ ุงูุฎุทุฉ
3. ุฅุฐุง ูู ููู ูุดุชุฑู:
   - ุญุณุงุจ ุงูุณุนุฑ ุงูููุงุฆู ูุน ุฅุถุงูุฉ AI Pro ุฅู ููุฌุฏุช
   - ุฅูุดุงุก ุฃู ุฌูุจ ูุนุฑูู ุงูุนูุงุฏุฉ (clinicId)
   - ุญูุธ ุจูุงูุงุช ุงูุฎุทุฉ ูู AsyncStorage
   - ุงูุงูุชูุงู ุฅูู ุตูุญุฉ ุงูุชุณุฌูู (signup)

---

## โ 2. ุชุฏูู ุงูุงุดุชุฑุงู ุฎุทูุฉ ุจุฎุทูุฉ

### ๐ ุฎุฑูุทุฉ ุงูุตูุญุงุช - ุงูุชุณูุณู ุงููุงูู

```
ุงูุจุฏุงูุฉ: ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ (/(tabs)/home)
    โ
[1] ุตูุญุฉ ุงุฎุชูุงุฑ ุงูุฎุทุฉ - Subscribe Page
    (app/clinic/subscribe.tsx)
    ๐ค ุงูุฅุฌุฑุงุก: ุงุฎุชูุงุฑ ุฎุทุฉ (Monthly / Yearly) + ุงุฎุชูุงุฑ AI Pro (ุงุฎุชูุงุฑู)
    ๐ ุงูุฒุฑ: "Start Subscription โ $XX.XX/period"
    โ
[2] ุตูุญุฉ ุงูุชุณุฌูู - Sign Up Page
    (app/clinic/signup.tsx)
    ๐ค ุงูุฅุฌุฑุงุก: ุฅุฏุฎุงู ุจูุงูุงุช ุงูุญุณุงุจ ูุงูุนูุงุฏุฉ ูุทุฑููุฉ ุงูุฏูุน
    ๐ ุงูุฒุฑ: "Subscribe" (ุฃู "Subscribe for FREE" ุฅุฐุง ูุงูุช 100% ุฎุตู)
    โ
[3] ุตูุญุฉ ุชุฃููุฏ ุงูุงุดุชุฑุงู - Confirm Subscription
    (app/clinic/confirm-subscription.tsx)
    ๐ค ุงูุฅุฌุฑุงุก: ูุฑุงุฌุนุฉ ุงูุจูุงูุงุช ูุงูุถุบุท ุนูู "Complete/Confirm"
    ๐ ุงูุฒุฑ: "Complete FREE Subscription" ุฃู "Confirm Subscription"
    โ
[4] ููุญุฉ ุงูุชุญูู - Dashboard
    (app/clinic/dashboard)
    โ ุงูููุงูุฉ: ุงููุตูู ุฅูู ุญุณุงุจ ุงูุนูุงุฏุฉ
```

### ๐ ูุตู ุชูุตููู ููู ูุฑุญูุฉ

#### **ุงููุฑุญูุฉ 1๏ธโฃ: ุตูุญุฉ ุงุฎุชูุงุฑ ุงูุฎุทุฉ (Subscribe Page)**

**ุงูููู:** `app/clinic/subscribe.tsx` (746 ุณุทุฑ)

**ูุง ูุญุฏุซ:**
1. **ุงูุชุญูู ูู ุงูุฃุฏูุงุฑ:**
   - ูุณูุญ ููุท ูููุณุชุฎุฏููู ุจุฏูุฑ "clinic" ู "OWNER_ADMIN"
   - ูุฑูุน ุงููุฑูุถ ุฅูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ ุชููุงุฆููุง

2. **ุนุฑุถ ุงูุฎุทุท ุงููุชุงุญุฉ:**
   - **Monthly Plan:** $19.99/ุดูุฑ (ููุนุฑุถ ูุฃูุถู ูููุฉ)
   - **Yearly Plan:** $230.88/ุณูุฉ (ููุนุฑุถ ูุฃูุถู ุตููุฉ)
   - ููุฎุต ุงูููุฒุงุช ููู ุฎุทุฉ

3. **ุงุฎุชูุงุฑ AI Pro (ุงุฎุชูุงุฑู):**
   - ุฅุถุงูุฉ $9.99/ุดูุฑ ููุฎุทุฉ ุงูุดูุฑูุฉ
   - ุฅุถุงูุฉ $119.88/ุณูุฉ ููุฎุทุฉ ุงูุณูููุฉ

4. **ุงูุฒุฑ ุงูุฑุฆูุณู:**
   ```
   ูุต ุงูุฒุฑ: "Start Subscription โ $19.99/month"
   ูุชุบูุฑ ุญุณุจ ุงูุฎุทุฉ ุงููุฎุชุงุฑุฉ ูุฅุถุงูุฉ AI Pro
   ```

---

#### **ุงููุฑุญูุฉ 2๏ธโฃ: ุตูุญุฉ ุงูุชุณุฌูู (Sign Up Page)**

**ุงูููู:** `app/clinic/signup.tsx` (1271 ุณุทุฑ)

**ูุง ูุญุฏุซ:**

**ุฃ) ุฌูุจ ุจูุงูุงุช ุงูุฎุทุฉ ุงููุฎุชุงุฑุฉ:**
- ูุฑุงุกุฉ AsyncStorage ููุญุตูู ุนูู:
  - `pendingSubscriptionPlanName`
  - `pendingSubscriptionPrice`
  - `pendingSubscriptionPriceWithAIPro`

**ุจ) ุชูุณูู ุงูุตูุญุฉ ุฅูู ุฃูุณุงู:**

| ุงููุณู | ุงูุญููู | ููุงุญุธุงุช |
|-------|--------|---------|
| ูุนูููุงุช ุดุฎุตูุฉ | ุงูุงุณู ุงูุฃููุ ุงูุงุณู ุงูุฃุฎูุฑ | ุงุฎุชูุงุฑู |
| ุชูุงุตูู ุงูุญุณุงุจ | ุงูุจุฑูุฏ ุงูุฅููุชุฑูููุ ูููุฉ ุงููุฑูุฑ | **ูุทููุจ** |
| ูุนูููุงุช ุงูุนูุงุฏุฉ (ุงุฎุชูุงุฑู) | ูุงุชู ุงูุนูุงุฏุฉุ ุงุณู ุงูุนูุงุฏุฉุ ุตูุฑุฉ ุงูุนูุงุฏุฉ | ุงุฎุชูุงุฑู |
| ุงูุฏูู ูุงููุฏููุฉ | ุงุฎุชูุงุฑ ุงูุฏููุ ุงููุฏููุฉ | ุงูุฏูู **ูุทููุจุฉ** |
| ุทุฑููุฉ ุงูุฏูุน | ุจุทุงูุฉ ุงุฆุชูุงูุ Apple Payุ PayPalุ Google Pay | ูุชุบูุฑุฉ |

**ุฌ) ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช:**

- **ุฅุฐุง ูุงูุช ุงูุฎุทุฉ ูุฌุงููุฉ (100% ุฎุตู):**
  ```
  - ูุง ูุชู ุงูุชุญูู ูู ุจูุงูุงุช ุงูุจุทุงูุฉ
  - ูุชู ุนุฑุถ ุฑุณุงูุฉ: "โ Payment not required - 100% discount applied!"
  - ุฒุฑ ุงูุชุณุฌูู: "Subscribe for FREE" (ุฃุฎุถุฑ)
  ```

- **ุฅุฐุง ูุงูุช ุงูุฎุทุฉ ูุฏููุนุฉ:**
  ```
  - ุงูุชุญูู ูู ุฌููุน ุญููู ุงูุจุทุงูุฉ (ุฅุฐุง ุชู ุงุฎุชูุงุฑ Card)
  - ุงูุชุญูู ูู ุงุฎุชูุงุฑ ุทุฑููุฉ ุฏูุน
  - ุฒุฑ ุงูุชุณุฌูู: "Subscribe" (ุฃุฒุฑู)
  ```

**ุฏ) ุญูุธ ุจูุงูุงุช ูู AsyncStorage:**

ุนูุฏ ุงูุถุบุท ุนูู "Subscribe"ุ ูุชู ุญูุธ:

```typescript
const pendingData = {
  pendingClinicName: clinicName,
  pendingClinicPhone: clinicPhone,
  pendingSubscriptionEmail: email,
  pendingCardName: cardName,
  pendingCardNumber: cardNumber,
  pendingCardExpiry: cardExpiry,
  pendingCardCvc: cardCvc,
  pendingPaymentMethod: selectedPaymentMethod,
  pendingAppliedCoupon: appliedCoupon,
  clinicImage: clinicImage (if selected),
};
```

**ูู) ุฑูุน ุตูุฑุฉ ุงูุนูุงุฏุฉ (ุงุฎุชูุงุฑู):**

```
- ุงููุณุชุฎุฏู ูุฎุชุงุฑ ุตูุฑุฉ ูู ูุนุฑุถ ุงููุงุชู
- ุชุญุฌูู: 1:1 aspect ratio (ูุฑุจุน)
- ุฌูุฏุฉ: 80%
- ูุนุงููุฉ: 80x80px thumbnail
```

---

#### **ุงููุฑุญูุฉ 3๏ธโฃ: ุตูุญุฉ ุชุฃููุฏ ุงูุงุดุชุฑุงู (Confirm Subscription)**

**ุงูููู:** `app/clinic/confirm-subscription.tsx` (588 ุณุทุฑ)

**ูุง ูุญุฏุซ:**

**ุฃ) ุฌูุจ ุงูุจูุงูุงุช ูู AsyncStorage:**

```typescript
const data = {
  planName: "Monthly",
  basePrice: "19.99",
  finalPrice: "19.99",  // ูุฏ ุชููู ูุฎุชููุฉ ุฅุฐุง ุชู ุชุทุจูู ููุจูู
  discount: "0",
  coupon: null,
  email: "owner@clinic.com",
  clinicId: "ABC123",
  includeAIPro: false,
  clinicImageUrl: "https://..."
};
```

**ุจ) ุนุฑุถ ููุฎุต ุงูุงุดุชุฑุงู:**

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ุตูุฑุฉ ุงูุนูุงุฏุฉ (ุฅู ููุฌุฏุช)            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ุงูุฎุทุฉ: Monthly                      โ
โ ุงูุณุนุฑ ุงูุฃุณุงุณู: $19.99               โ
โ ุงูุฎุตู (ุฅู ููุฌุฏ): -$5.00            โ
โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ ุงูุฅุฌูุงูู: $14.99                    โ
โ ุทุฑููุฉ ุงูุฏูุน: Credit Card            โ
โ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู: owner@clinic.com โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

**ุฌ) ุงููุฑู ุจูู ุงูุฎุทุท ุงููุฏููุนุฉ ูุงููุฌุงููุฉ:**

| ุงูุฎุงุตูุฉ | ุฎุทุฉ ูุฏููุนุฉ | ุฎุทุฉ ูุฌุงููุฉ (100% ุฎุตู) |
|--------|-----------|----------------------|
| ูุต ุงูุฎุทุฉ | "Monthly" | "Free Subscription" |
| ููู ุงูุฎุทุฉ | ุฃุณูุฏ | ุฃุฎุถุฑ (#10b981) |
| ุงูุณุนุฑ | "$19.99" | "$0.00" ุฃู "Free" |
| ุงูุฏูุน | "Credit Card" | "Not required" ุฃู "100% Discount" |
| ููู ุงูุฒุฑ | ุฃุฒุฑู | ุฃุฎุถุฑ |
| ูุต ุงูุฒุฑ | "Confirm Subscription" | "Complete FREE Subscription" |
| ุงูุญุฏ ุงูุฃุฎุถุฑ | ูุง | ูุนูุ ุญูู ุงููุงุฑุช |

**ุฏ) ุนูุฏ ุงูุถุบุท ุนูู "Confirm":**

```
1. ุฅุฑุณุงู ุจุฑูุฏ ุชุฃููุฏ (Mock) ุฅูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
2. ุชุญุฏูุซ Firestore (clinics collection):
   - subscribed: true
   - subscriptionPlan: "MONTHLY" ุฃู "YEARLY"
   - finalPrice: 19.99
   - subscriptionConfirmedAt: timestamp
3. ูุณุญ ุงูุจูุงูุงุช ุงููุคูุชุฉ ูู AsyncStorage
4. ุงูุงูุชูุงู ุฅูู ููุญุฉ ุงูุชุญูู (Dashboard)
```

---

#### **ุงููุฑุญูุฉ 4๏ธโฃ: ููุญุฉ ุงูุชุญูู (Dashboard)**

**ุงูููู:** `app/clinic/dashboard` (816 ุณุทุฑ)

**ูุง ูุญุฏุซ:**
- โ ุงููุตูู ุงููุงูู ุฅูู ุญุณุงุจ ุงูุนูุงุฏุฉ
- โ ุนุฑุถ ูุนูููุงุช ุงูุงุดุชุฑุงู
- โ ุนุฑุถ ุตูุฑุฉ ุงูุนูุงุฏุฉ ุฅู ููุฌุฏุช

---

## โ 3. ุงูุฎุทุฉ ูุงูุณุนุฑ

### ๐ท๏ธ ููููุฉ ุชุญุฏูุฏ ููุน ุงูุฎุทุฉ

**ูู ุตูุญุฉ Subscribe:**

```typescript
// ููุน ุงูุฎุทุฉ
type PlanId = 'MONTHLY' | 'YEARLY';

// ุงูุฎุทุท ุงููุชุงุญุฉ
const plans: PlanOption[] = [
  {
    id: 'MONTHLY',
    name: 'Monthly',
    basePrice: 19.99,
    oldPrice: 29.99,  // ููุนุฑุถ ุงููุดุทูุจ
    billingPeriod: '/month',
    badge: 'Best value',
  },
  {
    id: 'YEARLY',
    name: 'Annual',
    basePrice: 230.88,
    oldPrice: 239.88,  // ููุนุฑุถ ุงููุดุทูุจ
    billingPeriod: '/year',
    yearlyEquivalent: '$19.24/mo',
    savings: 'Save $9.00',
    badge: 'Best deal',
  }
];
```

### ๐ฐ ุญุณุงุจ ุงูุณุนุฑ ุงูููุงุฆู

**ุงูุตูุบุฉ ุงูุฃุณุงุณูุฉ:**

```typescript
// ุงูุฎุทูุฉ 1: ุณุนุฑ ุงูุฎุทุฉ ุงูุฃุณุงุณู
basePrice = 
  selectedPlan === 'YEARLY' 
    ? 230.88 
    : 19.99;

// ุงูุฎุทูุฉ 2: ุฅุถุงูุฉ AI Pro (ุฅู ุชู ุงุฎุชูุงุฑูุง)
aiProAddOn = 
  selectedPlan === 'YEARLY' 
    ? 119.88 
    : 9.99;

// ุงูุฎุทูุฉ 3: ุงูุณุนุฑ ุงูููุงุฆู
finalPrice = 
  selectedAIPro 
    ? basePrice + aiProAddOn 
    : basePrice;

// ุฃูุซูุฉ:
// - Monthly: 19.99
// - Monthly + AI Pro: 19.99 + 9.99 = 29.98
// - Yearly: 230.88
// - Yearly + AI Pro: 230.88 + 119.88 = 350.76
```

### ๐๏ธ ุชุทุจูู ุงูููุจูู ูุงูุฎุตููุงุช

**ูู ุตูุญุฉ Sign Up:**

```typescript
// ุญูู ุฅุฏุฎุงู ุงูููุจูู
const [couponCode, setCouponCode] = useState('');
const [appliedCoupon, setAppliedCoupon] = useState<string | null>(null);
const [couponError, setCouponError] = useState('');
```

**ุฏุงูุฉ ุชุทุจูู ุงูููุจูู:**

```typescript
const applyCoupon = async () => {
  // ุงูุชุญูู ูู ุงูููุจูู ุงููุฏุฎู
  // ุงูููุจููุงุช ุงููุฏุนููุฉ:
  
  1. 'WELCOME100' โ 100% ุฎุตู (ูุฌุงูู ุชูุงูุงู)
     finalPrice = 0
     
  2. 'SAVE20' โ ุฎุตู 20%
     finalPrice = basePrice * 0.8
     
  3. 'SAVE50' โ ุฎุตู 50%
     finalPrice = basePrice * 0.5
     
  // ุญูุธ ุงูููุจูู ุงููุทุจู
  await AsyncStorage.setItem('pendingAppliedCoupon', couponCode);
};
```

### โ ุฏุนู ุงูุฎุทุฉ ุงููุฌุงููุฉ (100% Coupon)

**ุงูุชุญูู ูู ุงูุฎุทุฉ ุงููุฌุงููุฉ:**

```typescript
const isFreeSubscription = parseFloat(planPrice) === 0;

if (isFreeSubscription) {
  // 1. ูุง ูุชู ุงูุชุญูู ูู ุตุญุฉ ุงูุจุทุงูุฉ
  return true;  // ุณูุญ ุจุงููุชุงุจุนุฉ
  
  // 2. ุนุฑุถ ุฑุณุงูุฉ ุฎุงุตุฉ
  <View style={{ backgroundColor: '#d1fae5' }}>
    <Text>โ Payment not required - 100% discount applied!</Text>
  </View>
  
  // 3. ุชุบููุฑ ูุต ุงูุฒุฑ
  buttonText = 'Subscribe for FREE';
  buttonColor = '#10b981';  // ุฃุฎุถุฑ
}
```

---

## โ 4. ุทุฑููุฉ ุงูุฏูุน

### ๐ณ ุทุฑู ุงูุฏูุน ุงููุฏุนููุฉ

**ุงูุทุฑู ุงููุชุงุญุฉ:**

| ุงูุทุฑููุฉ | ุงูุญุงูุฉ | ุงูุญููู ุงููุทููุจุฉ | ููุงุญุธุงุช |
|--------|--------|-----------------|---------|
| **Credit Card** | ููุชููุฉ โ | ุงุณูุ ุฑููุ ุงูุชูุงุกุ CVC | ูุชุทูุจ ุชุญูู ูุงูู |
| **Apple Pay** | ูุญุงูุงุฉ | ูุง ุดูุก | ุจุนุฏ ุงูุงุฎุชูุงุฑุ ุธููุฑ Modal ุชุฃููุฏ |
| **PayPal** | ูุญุงูุงุฉ | ูุง ุดูุก | ุจุนุฏ ุงูุงุฎุชูุงุฑุ ุธููุฑ Modal ุชุฃููุฏ |
| **Google Pay** | ูุญุงูุงุฉ | ูุง ุดูุก | ุจุนุฏ ุงูุงุฎุชูุงุฑุ ุธููุฑ Modal ุชุฃููุฏ |

### ๐ ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช

**ุงูุชุญูู ุญุณุจ ุทุฑููุฉ ุงูุฏูุน:**

#### **1. ุงูุจุทุงูุฉ ุงูุงุฆุชูุงููุฉ (Credit Card)**

```typescript
const validateCard = () => {
  // 1. ุฑูู ุงูุจุทุงูุฉ
  - ูุฌุจ ุฃู ูููู 15-19 ุฑูู
  - ุตูุบุฉ: /^\d{15,19}$/
  - ูุซุงู: 4532123456789012
  
  // 2. ุงุณู ุนูู ุงูุจุทุงูุฉ
  - ูุฌุจ ุฃู ูููู 2 ุญุฑู ุนูู ุงูุฃูู
  - ูุซุงู: "John Doe"
  
  // 3. ุชุงุฑูุฎ ุงูุงูุชูุงุก
  - ุตูุบุฉ: MM/YY ุฃู MM/YYYY
  - ุตูุบุฉ: /^(0[1-9]|1[0-2])\/(\d{2}|\d{4})$/
  - ูุซุงู: "12/25" ุฃู "12/2025"
  
  // 4. CVC
  - ูุฌุจ ุฃู ูููู 3 ุฃู 4 ุฃุฑูุงู
  - ุตูุบุฉ: /^\d{3,4}$/
  - ูุซุงู: "123" ุฃู "1234"
  
  // ุงููุชูุฌุฉ
  return numOk && nameOk && expiryOk && cvcOk;
};
```

**ุฑุณุงุฆู ุงูุฎุทุฃ ูู ุงูููุช ุงููุนูู:**

```
ุญูู ุงุณู ุงูุจุทุงูุฉ:
โ "Empty" โ ุจุฏูู ุฑุณุงูุฉ ุฎุทุฃ
โ "A" โ "Card name must be at least 2 characters"
โ "John Doe" โ ุจุฏูู ุฎุทุฃ

ุญูู ุฑูู ุงูุจุทุงูุฉ:
โ "4532" โ "Card number must be at least 15 digits"
โ "ABCD123456789012" โ "Card number must contain only digits"
โ "4532123456789012" โ ุจุฏูู ุฎุทุฃ

ุญูู ุงูุงูุชูุงุก:
โ "13/25" โ "Invalid expiry format. Use MM/YY"
โ "12/1" โ "Invalid expiry format. Use MM/YY"
โ "12/25" โ ุจุฏูู ุฎุทุฃ

ุญูู CVC:
โ "12" โ "CVC must be 3 or 4 digits"
โ "12345" โ "CVC must be 3 or 4 digits"
โ "123" โ ุจุฏูู ุฎุทุฃ
```

#### **2. Apple Pay / PayPal / Google Pay**

```typescript
// ูุง ูุชุทูุจ ุญููู ุฅุถุงููุฉ
// ุงููุชุทูุจ ุงููุญูุฏ: ุงุฎุชูุงุฑ ุงูุทุฑููุฉ ูู ุงููุงุฆูุฉ
selectedPaymentMethod === 'apple-pay'  // true
selectedPaymentMethod === 'paypal'     // true
selectedPaymentMethod === 'google-pay' // true
```

---

## โ 5. ุชุฎุฒูู ุงูุจูุงูุงุช

### ๐พ AsyncStorage - ุงูุจูุงูุงุช ุงููุคูุชุฉ (Temporary)

**ุบุฑุถ AsyncStorage:** ุชุฎุฒูู ูุคูุช ููุจูุงูุงุช ุจูู ุงูุตูุญุงุช (ูู ุงูุฐุงูุฑุฉ ุงููุญููุฉ)

**ุงูุจูุงูุงุช ุงููุญููุธุฉ ุฃุซูุงุก ุงูุงุดุชุฑุงู:**

```typescript
// ูู ุตูุญุฉ Subscribe
await AsyncStorage.multiSet([
  ['pendingSubscriptionPlan', 'MONTHLY'],               // ููุน ุงูุฎุทุฉ
  ['pendingSubscriptionPlanName', 'Monthly'],          // ุงุณู ุงูุฎุทุฉ
  ['pendingSubscriptionPrice', '19.99'],               // ุงูุณุนุฑ ุงูุฃุณุงุณู
  ['pendingSubscriptionPriceWithAIPro', '29.98'],     // ุงูุณุนุฑ ูุน AI Pro
  ['pendingIncludeAIPro', 'true'],                     // ูู ูุดูู AI Pro
  ['clinicId', 'ABC123XYZ'],                           // ูุนุฑูู ุงูุนูุงุฏุฉ
]);

// ูู ุตูุญุฉ Sign Up (ุฃุซูุงุก ุงูููุก)
await AsyncStorage.multiSet([
  ['pendingClinicName', 'Smile Clinic'],               // ุงุณู ุงูุนูุงุฏุฉ
  ['pendingClinicPhone', '+1234567890'],               // ูุงุชู ุงูุนูุงุฏุฉ
  ['pendingSubscriptionEmail', 'owner@clinic.com'],   // ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
  ['pendingCardName', 'John Doe'],                     // ุงุณู ุนูู ุงูุจุทุงูุฉ
  ['pendingCardNumber', '4532123456789012'],           // ุฑูู ุงูุจุทุงูุฉ
  ['pendingCardExpiry', '12/25'],                      // ุชุงุฑูุฎ ุงูุชูุงุก ุงูุจุทุงูุฉ
  ['pendingCardCvc', '123'],                           // ุฑูุฒ CVC
  ['pendingPaymentMethod', 'card'],                    // ุทุฑููุฉ ุงูุฏูุน
  ['pendingAppliedCoupon', 'WELCOME100'],              // ุงูููุจูู ุงููุทุจู
  ['clinicImageUrl', 'file://...'],                    // ุฑุงุจุท ุตูุฑุฉ ุงูุนูุงุฏุฉ
]);
```

**ูุณุญ ุงูุจูุงูุงุช ุงููุคูุชุฉ (ุจุนุฏ ุงูุงุดุชุฑุงู):**

```typescript
// ูู ุตูุญุฉ Confirm Subscription - ุจุนุฏ ุงูุชุฃููุฏ
await AsyncStorage.multiRemove([
  'pendingSubscriptionPlan',
  'pendingSubscriptionPlanName',
  'pendingSubscriptionPrice',
  'pendingSubscriptionPriceWithAIPro',
  'pendingIncludeAIPro',
  'pendingPaymentMethod',
  'pendingAppliedCoupon',
  'pendingClinicName',
  'pendingClinicPhone',
  'pendingSubscriptionEmail',
  'pendingCardName',
  'pendingCardNumber',
  'pendingCardExpiry',
]);
```

### ๐๏ธ Firestore - ุงูุจูุงูุงุช ุงูุฏุงุฆูุฉ (Permanent)

**ุบุฑุถ Firestore:** ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุฑุฆูุณูุฉ ูุชุฎุฒูู ุจูุงูุงุช ุงูุงุดุชุฑุงู ุจุดูู ุฏุงุฆู

**ุงููุฌููุนุฉ:** `clinics` collection

**ุงูุจูุงูุงุช ุงููุญููุธุฉ ูู Firestore:**

```typescript
// ูุซููุฉ ุงูุนูุงุฏุฉ ุจุนุฏ ุงูุงุดุชุฑุงู
{
  id: 'ABC123XYZ',  // ูุนุฑูู ุงูุนูุงุฏุฉ
  
  // ูุนูููุงุช ุงูุงุดุชุฑุงู
  subscribed: true,                                  // ูู ูุดุชุฑู
  subscriptionPlan: 'MONTHLY',                      // ููุน ุงูุฎุทุฉ
  subscriptionPlanName: 'Monthly',                  // ุงุณู ุงูุฎุทุฉ
  subscriptionPrice: 19.99,                         // ุงูุณุนุฑ ุงูุฃุณุงุณู
  subscriptionPriceWithAIPro: 29.98,               // ุงูุณุนุฑ ูุน AI Pro
  includeAIPro: true,                               // ูู ูุดูู AI Pro
  appliedCoupon: 'WELCOME100',                      // ุงูููุจูู ุงููุทุจู
  finalPrice: 0,                                    // ุงูุณุนุฑ ุงูููุงุฆู ุจุนุฏ ุงูุฎุตู
  
  // ูุนูููุงุช ุงูุฏูุน
  paymentMethod: 'card',                            // ุทุฑููุฉ ุงูุฏูุน
  subscriptionCurrency: 'USD',                      // ุงูุนููุฉ
  
  // ูุนูููุงุช ุงูุนูุงุฏุฉ
  clinicName: 'Smile Clinic',                       // ุงุณู ุงูุนูุงุฏุฉ
  clinicPhone: '+1234567890',                       // ูุงุชู ุงูุนูุงุฏุฉ
  
  // ุตูุฑุฉ ุงูุนูุงุฏุฉ
  imageUrl: 'https://firebasestorage.../...jpg',   // ุฑุงุจุท ุตูุฑุฉ ุงูุนูุงุฏุฉ
  imageUploadedAt: 1705419123456,                   // ููุช ุฑูุน ุงูุตูุฑุฉ
  
  // ุจูุงูุงุช ููุชูุฉ
  subscriptionUpdatedAt: 1705419123000,             // ุขุฎุฑ ุชุญุฏูุซ ููุงุดุชุฑุงู
  subscriptionConfirmedAt: 1705419150000,           // ููุช ุชุฃููุฏ ุงูุงุดุชุฑุงู
  subscribedAt: 1705419100000,                      // ููุช ุงูุงุดุชุฑุงู (server time)
  createdAt: 1705418000000,                         // ููุช ุฅูุดุงุก ุงููุซููุฉ
  detailsCompletedAt: 1705419100000,                // ููุช ุงูุชูุงู ุงูุชูุงุตูู
  
  // ูุนูููุงุช ุงูุตูุฉ
  status: 'active',                                 // ุญุงูุฉ ุงูุงุดุชุฑุงู (active/suspended)
  accountCreatedAt: 1705418000000,                  // ููุช ุฅูุดุงุก ุงูุญุณุงุจ
}
```

### ๐ธ Firebase Storage - ุตูุฑ ุงูุนูุงุฏุฉ

**ุงูุชุฎุฒูู ุงูููุธู:**

```
Bucket: dental-jawad.appspot.com
ุงููุณุงุฑ: clinics/{clinicId}/clinicImage.jpg

ูุซุงู:
clinics/ABC123XYZ/clinicImage.jpg
clinics/XYZ789ABC/clinicImage.jpg
clinics/DEF456GHI/clinicImage.jpg
```

**ุฎุตุงุฆุต ุงูููู:**

```
- ุงูุญุฌู: 100-300 KB (ุจุนุฏ ุงูุถุบุท)
- ุงูุตูุบุฉ: JPEG
- ุงูุฌูุฏุฉ: 80%
- ุงููุณุจุฉ: 1:1 (ูุฑุจุน)
- ุงูุฃุฐููุงุช: ูููู ููุฌููุน ุงููุฑุงุกุฉ (ููู Download URL)
```

---

## โ 6. ุดุงุดุฉ ุชุฃููุฏ ุงูุงุดุชุฑุงู

### ๐ ุงุณู ุงูุตูุญุฉ ูุงููุญุชููุงุช

**ุงุณู ุงูููู:** `app/clinic/confirm-subscription.tsx`  
**ุงูุญุฌู:** 588 ุณุทุฑ  
**ุงูุชุฑุชูุจ ูู ุงูุชุฏูู:** ุงููุฑุญูุฉ 3 ูู 4

### ๐จ ูุญุชููุงุช ุงูุตูุญุฉ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Header: ุฑูุฒ ุงูุนูุฏุฉ + ุนููุงู "BeSmile AI"             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ุงูุนููุงู: "Confirm Your Subscription"               โ
โ ุงููุต ุงููุฑุนู: "Review your subscription details below"โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ [ุตูุฑุฉ ุงูุนูุงุฏุฉ - ุฅุฐุง ููุฌุฏุช]                          โ
โ (200px height ร Full width)                         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ุจุทุงูุฉ ุชูุงุตูู ุงูุงุดุชุฑุงู:                              โ
โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ โ ุงูุฎุทุฉ: Monthly                               โ   โ
โ โ ุงูุณุนุฑ ุงูุฃุณุงุณู: $19.99                        โ   โ
โ โ ุงูุฎุตู (ุฅู ููุฌุฏ): -$5.00 (WELCOME50)        โ   โ
โ โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ   โ
โ โ ุงูุฅุฌูุงูู: $14.99                            โ   โ
โ โ ุทุฑููุฉ ุงูุฏูุน: Credit Card                   โ   โ
โ โ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู: owner@clinic.com         โ   โ
โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ [ุฑุณุงูุฉ ูุนูููุงุช]                                    โ
โ "Your subscription is free. Click confirm..."     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ [ุฒุฑ ุงูุชุฃููุฏ - ูุชุบูุฑ ุงูููู ูุงููุต ุญุณุจ ุงูููุน]        โ
โ ุฃุฒุฑู: "Confirm Subscription" (ุฎุทุท ูุฏููุนุฉ)        โ
โ ุฃุฎุถุฑ: "Complete FREE Subscription" (ุฎุทุท ูุฌุงููุฉ)  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ [ุฒุฑ ุงูุนูุฏุฉ]                                         โ
โ "Go Back"                                          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ๐ ุงููุฑู ุจูู ุงูุฎุทุท ุงููุฏููุนุฉ ูุงููุฌุงููุฉ

#### **ุงูุฎุทุฉ ุงููุฏููุนุฉ ($19.99/month):**

```
ุงูุฎุทุฉ: Monthly (ุฃุณูุฏ)
ุงูุณุนุฑ ุงูุฃุณุงุณู: $19.99
ุงูุฎุตู: -$0 (ูุง ููุฌุฏ)
โโโโโโโโโโโโโโโโโโโ
ุงูุฅุฌูุงูู: $19.99 (ุฃุฒุฑู)
ุทุฑููุฉ ุงูุฏูุน: Credit Card
ุงูุจุฑูุฏ: owner@clinic.com

ุฑุณุงูุฉ: "Click confirm to complete your subscription."

ุฒุฑ ุงูุชุฃููุฏ:
- ุงููุต: "Confirm Subscription"
- ุงูููู: ุฃุฒุฑู (#60a5fa)
- ุงููุณุจุฉ: 14px
- ุงูุญุฏ: ูุง ููุฌุฏ
```

#### **ุงูุฎุทุฉ ุงููุฌุงููุฉ (100% ุฎุตู):**

```
๐ข ุดุฑูุท ุฃุฎุถุฑ ูู ุฃุนูู ุงูุจุทุงูุฉ:
   "โ FREE SUBSCRIPTION"

ุงูุฎุทุฉ: Free Subscription (ุฃุฎุถุฑ)
ุงูุณุนุฑ ุงูุฃุณุงุณู: $19.99
ุงูุฎุตู: -$19.99 (WELCOME100)
โโโโโโโโโโโโโโโโโโโ
ุงูุฅุฌูุงูู: $0.00 ุฃู "Free Subscription" (ุฃุฎุถุฑ)
ุทุฑููุฉ ุงูุฏูุน: 100% Discount (ุฃู Not required)
ุงูุจุฑูุฏ: owner@clinic.com

ุฑุณุงูุฉ: "Your subscription is free. Click confirm to activate your account."

ุฒุฑ ุงูุชุฃููุฏ:
- ุงููุต: "Complete FREE Subscription"
- ุงูููู: ุฃุฎุถุฑ (#10b981)
- ุงููุณุจุฉ: 14px
- ุงูุญุฏ: ุฃุฎุถุฑ 2px ุญูู ุงูุจุทุงูุฉ
```

### ๐จ ุงูุชุตููู ูุงูุฃููุงู

**ุงูุจุทุงูุฉ ุงูุนุงุฏูุฉ:**
```
ุงูุญุฏ: 1px (ููู ุงูุญุฏ ุงูุนุงุฏู)
ุงูุฎูููุฉ: ููู ุงูุจุทุงูุฉ ุงูุงูุชุฑุงุถู
ุงูุธู: 0.08 opacity
```

**ุงูุจุทุงูุฉ ุงููุฌุงููุฉ:**
```
ุงูุญุฏ: 2px ุฃุฎุถุฑ (#10b981)
ุงูุฎูููุฉ: ููู ุงูุจุทุงูุฉ ูุน ุดุฑูุท ุฃุฎุถุฑ ูู ุงูุฃุนูู
ุงูุธู: 0.08 opacity
```

---

## โ 7. ูุง ุจุนุฏ ุงูุงุดุชุฑุงู

### โ ูุง ุงูุฐู ูุญุฏุซ ุจุนุฏ ุงูุถุบุท ุนูู ุงูุชุฃููุฏ

**ุงูุชุณูุณู ุงูุฏููู ููุนูููุงุช:**

```typescript
1๏ธโฃ ุงูุชุญูู ูู ุญุงูุฉ ุงูุฒุฑ (ููุน ุงูุถุบุท ุงููุชูุฑุฑ)
   if (confirming) return;

2๏ธโฃ ุชูุนูู ุญุงูุฉ ุงูุชุญููู
   setConfirming(true);

3๏ธโฃ ุฅุฑุณุงู ุจุฑูุฏ ุชุฃููุฏ (Mock ุญุงููุงู)
   await sendConfirmationEmail(email, subscriptionDetails);

4๏ธโฃ ุชุญุฏูุซ Firestore - ูุซููุฉ ุงูุนูุงุฏุฉ
   await updateDoc(doc(db, 'clinics', clinicId), {
     subscribed: true,
     subscriptionConfirmedAt: Date.now(),
     subscriptionPlan: 'MONTHLY' or 'YEARLY',
     appliedCoupon: coupon || null,
     finalPrice: parseFloat(finalPrice),
     basePrice: parseFloat(basePrice),
   });

5๏ธโฃ ูุณุญ ุงูุจูุงูุงุช ุงููุคูุชุฉ ูู AsyncStorage
   await AsyncStorage.multiRemove([...]);

6๏ธโฃ ุฅููุงู ุญุงูุฉ ุงูุชุญููู
   setConfirming(false);

7๏ธโฃ ุนุฑุถ ุชูุจูู ุงููุฌุงุญ
   Alert.alert(
     'Success',
     'Subscription confirmed! A confirmation email has been sent.'
   );

8๏ธโฃ ุงูุงูุชูุงู ุฅูู ููุญุฉ ุงูุชุญูู
   router.push('/clinic/dashboard');
```

### ๐ง ุฅุฑุณุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู

**ุงูุญุงูุฉ ุงูุญุงููุฉ:** Mock (ูุญุงูุงุฉ)

**ูุญุชูู ุงูุจุฑูุฏ:**

```
Dear Clinic Owner,

Thank you for subscribing to BeSmile AI!

Subscription Confirmation:
- Plan: Monthly
- Base Price: $19.99
- Discount Applied: -$5.00 (WELCOME50)
- Final Price: $14.99
- Payment Method: Card
- AI Pro: โ ENABLED (ุฅู ูุงู ูุฎุชุงุฑ)

Your account is now active and ready to use.
Log in to your clinic dashboard to get started.

Thank you for choosing BeSmile AI!

Best regards,
BeSmile AI Team
```

**ุงูุฎุทูุงุช ุงููุณุชูุจููุฉ:**

```
ุงูุฎุทุฉ ุงููุณุชูุจููุฉ:
1. ุงุณุชุฎุฏุงู Firebase Cloud Functions
2. ุฃู ุงุณุชุฎุฏุงู EmailJS API
3. ุฃู ุฃู ุฎุฏูุฉ ุจุฑูุฏ ุฎุงุฑุฌูุฉ

ุงูู Endpoint ุงููุชููุน:
POST /cloudFunctions/sendConfirmationEmail
{
  email: "owner@clinic.com",
  planName: "Monthly",
  basePrice: 19.99,
  discount: 5.00,
  coupon: "WELCOME50",
  finalPrice: 14.99,
  paymentMethod: "Card",
  includeAIPro: false
}
```

### ๐บ๏ธ ุงูุงูุชูุงู ุฅูู ููุญุฉ ุงูุชุญูู

**ุงููุฌูุฉ ุงูููุงุฆูุฉ:**

```
ุงูุตูุญุฉ: /clinic/dashboard
ุงูููู: app/clinic/dashboard.tsx
ุงููุตูู: 
- ููุณูุญ ููุท ูููุดุชุฑููู
- ููุณูุญ ููุท ุจุฏูุฑ OWNER_ADMIN
```

---

## โ 8. ุงููููุงุช ูุงูุฏูุงู ุงููุฑุชุจุทุฉ

### ๐ ุงููููุงุช ุงูุฃุณุงุณูุฉ

| ุงูููู | ุงูุญุฌู | ุงูุบุฑุถ | ุงููุณุคูู |
|------|--------|-------|---------|
| `app/clinic/subscribe.tsx` | 746 | ุงุฎุชูุงุฑ ุงูุฎุทุฉ | ุญุณุงุจ ุงูุณุนุฑ ูุงูุงูุชูุงู |
| `app/clinic/signup.tsx` | 1271 | ุฅูุดุงุก ุงูุญุณุงุจ | ุฌูุน ุงูุจูุงูุงุช ูุงูุชุญูู |
| `app/clinic/payment.tsx` | 726 | ูุนุงูุฌุฉ ุงูุฏูุน | ุชุฃููุฏ ุทุฑููุฉ ุงูุฏูุน |
| `app/clinic/confirm-subscription.tsx` | 588 | ุชุฃููุฏ ุงูููุงุฆู | ุงูููุงููุฉ ุนูู ุงูุงุดุชุฑุงู |
| `app/clinic/dashboard.tsx` | 816 | ููุญุฉ ุงูุชุญูู | ุงููุตูู ุจุนุฏ ุงูุงุดุชุฑุงู |

### ๐ง ุงููููุงุช ุงูุฏุงุนูุฉ

| ุงูููู | ุงูุบุฑุถ |
|------|-------|
| `src/types/subscription.ts` | ุชุนุฑููุงุช ุงูุฃููุงุน ูุงูุฃุณุนุงุฑ |
| `src/context/AuthContext.tsx` | ูุนูููุงุช ุงููุณุชุฎุฏู ูุงูุฏูุฑ |
| `src/context/ThemeContext.tsx` | ุงูุฃููุงู ูุงูุชุตููู |
| `src/utils/navigationGuards.ts` | ุญูุงูุฉ ุงูุตูุญุงุช (Guard) |
| `src/utils/firebaseStorageUtils.ts` | ุฑูุน ุตูุฑ ุงูุนูุงุฏุฉ |
| `firebaseConfig.ts` | ุฅุนุฏุงุฏุงุช Firebase |

### ๐ ุฃูู ุงูุฏูุงู ูุงูุนูููุงุช

#### **1. ูู Subscribe Page (subscribe.tsx)**

```typescript
// ุงูุฏุงูุฉ ุงูุฑุฆูุณูุฉ ููุงุดุชุฑุงู
handleSubscribe = async (plan: PlanOption) => {
  // ุงูุณุทูุฑ: 130-190
  // ุงููุณุคูููุงุช:
  // - ุงูุชุญูู ูู ุนุฏู ุงูุชูุฑุงุฑ
  // - ุญุณุงุจ ุงูุณุนุฑ ุงูููุงุฆู
  // - ุฅูุดุงุก/ุฌูุจ clinicId
  // - ุญูุธ ุงูุจูุงูุงุช ูู AsyncStorage
  // - ุงูุงูุชูุงู ุฅูู ุตูุญุฉ Signup
}

// ุฏุงูุฉ ุญุณุงุจ ุงูุณุนุฑ ุงูุฏููุงูููู
calculateSubscriptionPrice = (): string => {
  // ุงูุณุทูุฑ: 220-235
  // ุชุญุฏูุซ ุงูุณุนุฑ ุนูุฏ ุชุบููุฑ ุงูุฎุทุฉ ุฃู AI Pro
}

// ุฏุงูุฉ ุงูุงูุชูุงู ุฅูู ุงูุตูุญุฉ ุงูุณุงุจูุฉ
goBack = () => {
  router.replace('/(tabs)/home');
}
```

#### **2. ูู Signup Page (signup.tsx)**

```typescript
// ุงูุชุญูู ูู ุตุญุฉ ุจูุงูุงุช ุงูุจุทุงูุฉ
isCardValid = (): boolean => {
  // ุงูุณุทูุฑ: 280-300
  // ุงูุชุญูู ูู:
  // - ุฑูู ุงูุจุทุงูุฉ (15-19 ุฑูู)
  // - ุงุณู ุงูุจุทุงูุฉ (2+ ุญุฑู)
  // - ุชุงุฑูุฎ ุงูุงูุชูุงุก (MM/YY)
  // - CVC (3-4 ุฃุฑูุงู)
}

// ุงูุชุญูู ุงูููุฑู (Real-time) ูุญููู ุงูุจุทุงูุฉ
validateCardName = (value: string) => {
  validateCardNumber = (value: string) => {
  validateCardExpiry = (value: string) => {
  validateCardCvc = (value: string) => {
}

// ุงุฎุชูุงุฑ ูุตูุฑุฉ ุงูุนูุงุฏุฉ
pickClinicImage = async () => {
  // ุงูุณุทูุฑ: 350-400
  // ุทูุจ ุงูุฃุฐููุงุช ูุงูุตูุฑุฉ ูู ุงููุนุฑุถ
}

// ุฅููุงู ุงูุฏูุน ูุงูุงูุชูุงู
completePaymentAndLogin = async () => {
  // ุงูุณุทูุฑ: 750-800
  // 1. ุฑูุน ุตูุฑุฉ ุงูุนูุงุฏุฉ (ุฅู ููุฌุฏุช)
  // 2. ุญูุธ ุฑุงุจุท ุงูุตูุฑุฉ ูู Firestore
  // 3. ุงูุงูุชูุงู ุฅูู ุตูุญุฉ ุงูุชุฃููุฏ
}
```

#### **3. ูู Confirm Subscription Page (confirm-subscription.tsx)**

```typescript
// ุฌูุจ ุจูุงูุงุช ุงูุงุดุชุฑุงู ูู AsyncStorage
loadSubscriptionData = async () => {
  // ุงูุณุทูุฑ: 45-85
  // ูุฑุงุกุฉ 9 ููู ูู AsyncStorage
  // ุญุณุงุจ ุงูุฎุตู ูุงูุณุนุฑ ุงูููุงุฆู
}

// ุฅุฑุณุงู ุจุฑูุฏ ุงูุชุฃููุฏ
sendConfirmationEmail = async (
  userEmail: string, 
  subscriptionDetails: any
) => {
  // ุงูุณุทูุฑ: 110-150
  // ูุญุงูุงุฉ ุฅุฑุณุงู ุงูุจุฑูุฏ (ุญุงููุงู)
}

// ุชุฃููุฏ ุงูุงุดุชุฑุงู ุงูููุงุฆู
handleConfirmSubscription = async () => {
  // ุงูุณุทูุฑ: 160-210
  // 1. ุฅุฑุณุงู ุงูุจุฑูุฏ
  // 2. ุชุญุฏูุซ Firestore
  // 3. ูุณุญ ุงูุจูุงูุงุช ุงููุคูุชุฉ
  // 4. ุงูุงูุชูุงู ุฅูู Dashboard
}
```

### ๐ Props ู State ุงููููุฉ

```typescript
// Subscribe Page
const [selectedPlan, setSelectedPlan] = useState<PlanId | null>(null);
const [selectedAIPro, setSelectedAIPro] = useState(false);
const [isSubscribed, setIsSubscribed] = useState<boolean | null>(null);

// Signup Page
const [selectedPaymentMethod, setSelectedPaymentMethod] = 
  useState<'card' | 'apple-pay' | 'paypal' | 'google-pay' | null>(null);
const [clinicImage, setClinicImage] = useState<string | null>(null);
const [appliedCoupon, setAppliedCoupon] = useState<string | null>(null);
const [cardNameError, setCardNameError] = useState('');
const [cardNumberError, setCardNumberError] = useState('');
const [cardExpiryError, setCardExpiryError] = useState('');
const [cardCvcError, setCardCvcError] = useState('');

// Confirm Subscription Page
const [finalPrice, setFinalPrice] = useState('');
const [paymentMethod, setPaymentMethod] = useState('');
const [appliedCoupon, setAppliedCoupon] = useState<string | null>(null);
const [clinicImageUrl, setClinicImageUrl] = useState<string | null>(null);
const [confirming, setConfirming] = useState(false);
```

---

## โ 9. ููุฎุต ููุงุฆู ูุชุฏูู ูุงูู

### ๐ ุฑุณู ุชุฎุทูุทู ูุชุฏูู ุงูุงุดุชุฑุงู

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ุงูุจุฏุงูุฉ: ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ (Home Page)                          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                           โ ูุถุบุท ุงููุณุชุฎุฏู "Subscribe"
                           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ [1] ุตูุญุฉ ุงุฎุชูุงุฑ ุงูุฎุทุฉ - Subscribe Page                         โ
โ     โ ุนุฑุถ ุฎุทุชูู: Monthly ($19.99) ู Yearly ($230.88)          โ
โ     โ ุฎูุงุฑ ุฅุถุงูุฉ AI Pro ($9.99 ุฃู $119.88)                   โ
โ     โ ุญูุธ ุงูุจูุงูุงุช ูู AsyncStorage                            โ
โ     โ ุฅูุดุงุก/ุฌูุจ clinicId                                       โ
โ                                                                 โ
โ     [ุฒุฑ: Start Subscription โ $XX.XX/period]                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                           โ
                           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ [2] ุตูุญุฉ ุงูุชุณุฌูู - Sign Up Page                               โ
โ                                                                 โ
โ  ุงููุณู 1: ูุนูููุงุช ุดุฎุตูุฉ (First Name, Last Name)               โ
โ  ุงููุณู 2: ุชูุงุตูู ุงูุญุณุงุจ (Email, Password) โ ูุทููุจ              โ
โ  ุงููุณู 3: ูุนูููุงุช ุงูุนูุงุฏุฉ (Clinic Name, Phone, Image)         โ
โ  ุงููุณู 4: ุงููููุน (Country โ ูุทููุจ, City)                      โ
โ  ุงููุณู 5: ุทุฑููุฉ ุงูุฏูุน                                          โ
โ         - Card (ูุชุทูุจ: ุงุณูุ ุฑููุ ุงูุชูุงุกุ CVC)                โ
โ         - Apple Pay / PayPal / Google Pay (ุจุฏูู ุญููู)        โ
โ                                                                 โ
โ  ุงูุชุญูู ูู ุงูุจูุงูุงุช:                                           โ
โ  โ ุฅุฐุง ูุงูุช 100% ุฎุตู: ุชุฎุทู ุงูุชุญูู ูู ุงูุจุทุงูุฉ                 โ
โ  โ ุฅุฐุง ูุงูุช ูุฏููุนุฉ: ุงูุชุญูู ุงููุงูู ูู ุงูุจุทุงูุฉ                 โ
โ                                                                 โ
โ  [ุฒุฑ: Subscribe] ุฃู [ุฒุฑ: Subscribe for FREE]                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                           โ ุญูุธ ุฌููุน ุงูุจูุงูุงุช ูู AsyncStorage
                           โ ุฑูุน ุตูุฑุฉ ุงูุนูุงุฏุฉ (ุฅู ููุฌุฏุช) ุฅูู Firebase
                           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ [3] ุตูุญุฉ ุงูุชุฃููุฏ - Confirm Subscription Page                   โ
โ                                                                 โ
โ  ุฌูุจ ุงูุจูุงูุงุช ูู AsyncStorage:                                 โ
โ  - ููุน ุงูุฎุทุฉ (Monthly/Yearly)                                 โ
โ  - ุงูุณุนุฑ ุงูุฃุณุงุณู ูุงูุณุนุฑ ุงูููุงุฆู                               โ
โ  - ุงูููุจูู ุงููุทุจู (ุฅู ููุฌุฏ)                                  โ
โ  - ุทุฑููุฉ ุงูุฏูุน                                                 โ
โ  - ุงูุจุฑูุฏ ุงูุฅููุชุฑููู                                           โ
โ  - ุตูุฑุฉ ุงูุนูุงุฏุฉ                                                โ
โ                                                                 โ
โ  ุนุฑุถ ุงูููุฎุต:                                                  โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ                โ
โ  โ [ุตูุฑุฉ ุงูุนูุงุฏุฉ - ุฅู ููุฌุฏุช]                โ                โ
โ  โ                                          โ                โ
โ  โ ุงูุฎุทุฉ: Monthly / Free Subscription      โ                โ
โ  โ ุงูุณุนุฑ: $19.99 / $0.00                   โ                โ
โ  โ ุงูุฎุตู: -$0 / -$19.99                   โ                โ
โ  โ ุงูุฅุฌูุงูู: $19.99 / $0.00               โ                โ
โ  โ ุทุฑููุฉ: Card / Not required             โ                โ
โ  โ ุงูุจุฑูุฏ: owner@clinic.com               โ                โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ                โ
โ                                                                 โ
โ  [ุฒุฑ: Confirm Subscription] ุฃู [ุฒุฑ: Complete FREE]           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                           โ ุฅุฑุณุงู ุจุฑูุฏ ุชุฃููุฏ (Mock)
                           โ ุชุญุฏูุซ Firestore
                           โ ูุณุญ ุงูุจูุงูุงุช ุงููุคูุชุฉ ูู AsyncStorage
                           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ [4] ููุญุฉ ุงูุชุญูู - Clinic Dashboard                             โ
โ                                                                 โ
โ  โ ุงูุงุดุชุฑุงู ููุชูู ุจูุฌุงุญ!                                       โ
โ  โ ุฅููุงููุฉ ุงููุตูู ุฅูู ุฌููุน ุงูููุฒุงุช                           โ
โ  โ ุนุฑุถ ูุนูููุงุช ุงูุงุดุชุฑุงู ูุงูุนูุงุฏุฉ                             โ
โ                                                                 โ
โ  [ุฒุฑ: Change Plan] (ุฅุฐุง ุฃุฑุงุฏ ุงูุชุฑููุฉ/ุงูุฎูุถ)                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ๐ฏ ุงูููุงุท ุงููุงูุฉ ููุชุทููุฑ ุงููุณุชูุจูู

#### **1. ุงูุฃูุงู ูุงูุญูุงูุฉ**

```
โ ูุดููุฉ ุญุงููุฉ:
- ุฑูู ุงูุจุทุงูุฉ ูุชู ุชุฎุฒููู ุจูุถูุญ ูู AsyncStorage
- ูููุฉ ุงููุฑูุฑ ููุณุช ูุดูุฑุฉ

โ ุงูุชุญุณููุงุช ุงููุทููุจุฉ:
- ุงุณุชุฎุฏุงู Token ูุนุชูุฏ ุจุฏูุงู ูู ุฑูู ุงูุจุทุงูุฉ ุงููุงูู
- ุชุดููุฑ ูููุฉ ุงููุฑูุฑ ุนูุฏ ุงูุชุฎุฒูู
- ุงุณุชุฎุฏุงู HTTPS ููุท ููุชูุงุตู
- ุชุทุจูู PCI DSS standards
- ุนุฏู ุญูุธ ุจูุงูุงุช ุงูุฏูุน ูุญููุงู - ุงูุชูุงุตู ุงููุจุงุดุฑ ูุน Stripe/PayPal
```

#### **2. ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก**

```
โ ูุญุณูู:
- ุนุฑุถ ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ูููุณุชุฎุฏู
- ูุญุงููุฉ ุงูุฑูุน ูุฑุฉ ุฃุฎุฑู ููุตูุฑ ุงููุงุดูุฉ

โ ูููู ุชุญุณููู:
- ุฅุถุงูุฉ Retry Logic ููุนูููุงุช ุงููุงุดูุฉ
- Logging ุดุงูู ูู ุจูุฆุฉ ุงูุฅูุชุงุฌ
- ุชุนูุจ ุงูุฃุฎุทุงุก ุจุงุณุชุฎุฏุงู Sentry ุฃู Firebase Crashlytics
```

#### **3. ุงูุฃุฏุงุก**

```
โ ุงูุชุญุณููุงุช ุงูุญุงููุฉ:
- Lazy loading ููุตูุฑ
- ุชุฌูุจ ุฅุนุงุฏุฉ ุงูุญุณุงุจุงุช ุบูุฑ ุงูุถุฑูุฑูุฉ

โ ูููู ุชุญุณููู:
- ุชุฎุฒูู ูุคูุช (Caching) ูุจูุงูุงุช ุงูุฎุทุท
- ุชูููู ุนุฏุฏ ุงุณุชุฏุนุงุกุงุช Firebase
- ุถุบุท ุตูุฑ ุงูุนูุงุฏุฉ ุฃูุซุฑ ูุจู ุงูุฑูุน
```

#### **4. ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู**

```
โ ุงูุฌูุฏ:
- ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ุจุงูููุช ุงููุนูู
- ุฒุฑ "Go Back" ุนูู ูู ุตูุญุฉ
- ุนุฑุถ ููุฎุต ูุงุถุญ ูุจู ุงูุชุฃููุฏ

โ ูููู ุชุญุณููู:
- ุฅุถุงูุฉ animation ุนูุฏ ุงูุงูุชูุงู ุจูู ุงูุตูุญุงุช
- Progress bar ููุธูุฑ ุงูุชูุฏู (1 ูู 4ุ 2 ูู 4ุ ุฅูุฎ)
- ุญูุธ ุงูุจูุงูุงุช ุงููุฏุฎูุฉ ูู ุญุงูุฉ ุงูุนูุฏุฉ
- ุฏุนู ูุบุงุช ูุชุนุฏุฏุฉ ููุฑุณุงุฆู (i18n ูุญุณูู)
- ุฅุถุงูุฉ ุชูููุญุงุช (Tooltips) ููุญููู ุงููุนูุฏุฉ
```

#### **5. ุงูุงูุชุซุงู ูุงูุดุฑูุท**

```
โ ูุฌุจ ุฅุถุงูุชู:
- ุดุฑูุท ุงูุฎุฏูุฉ ูุงูุฎุตูุตูุฉ
- ุฃููููุฉ ููุงููุฉ ุนูู ุงูุดุฑูุท
- ุฅุดุงุฑุฉ ุฅูู ุณูุงุณุฉ ุงูุงุณุชุฑุฌุงุน
- ูุนูููุงุช ุนู ุงูุฅูุบุงุก (Cancellation Policy)
```

#### **6. ุฏุนู ุงูุนููุงุช ูุงูุฏูู**

```
โ ุงูุญุงูู:
- ุงูุฃุณุนุงุฑ ุจู USD ููุท
- ุฏุนู ุงุฎุชูุงุฑ ุงูุฏูู

โ ูููู ุชุญุณููู:
- ุฏุนู ุนููุงุช ูุชุนุฏุฏุฉ (EUR, GBP, AED, ุฅูุฎ)
- ุฃุณุนุงุฑ ูุฎุชููุฉ ุญุณุจ ุงูุฏูู
- ุชุญููู ุงูุนููุงุช ุงูุฏููุงูููู
```

### ๐ก ุงูุชุฑุงุญุงุช ุงูุชุญุณูู

#### **ุฃููููุฉ ุนุงููุฉ:**

```
1. ุชุญููู Mock Email ุฅูู Cloud Function ูุนูู
2. ุชุทุจูู PCI DSS ูุงูุชุญูู ุงูุฃููู
3. ุฅุถุงูุฉ Progress Bar ููุฑุงุญู ุงูุงุดุชุฑุงู
4. ุฏุนู ุงูุงุณุชุฑุฌุงุน ูุงูุฅูุบุงุก
```

#### **ุฃููููุฉ ูุชูุณุทุฉ:**

```
5. ุฏุนู ุนููุงุช ูุชุนุฏุฏุฉ
6. Retry logic ููุนูููุงุช ุงููุงุดูุฉ
7. Animations ูุงูู Transitions
8. ุญูุธ ุงูุจูุงูุงุช ุงููุคูุชุฉ (Draft Save)
```

#### **ุฃููููุฉ ููุฎูุถุฉ:**

```
9. ุนุฑุถ ููุงุฑูุฉ ููุตูุฉ ุจูู ุงูุฎุทุท
10. ุฅุถุงูุฉ Testimonials ูู ุนููุงุก ูุนูููู
11. ุนุฑุถ ูุชุฑุฉ ุชุฌุฑูุจูุฉ (Free Trial)
12. Gamification ุนูุฏ ุงูุงุดุชุฑุงู (Rewards, Badges)
```

---

## ๐ ุงูุฎูุงุตุฉ

**ุงูุชุฏูู ุงููุงูู ูู 4 ุฎุทูุงุช:**

1. **ุงุฎุชูุงุฑ:** ุงููุณุชุฎุฏู ูุฎุชุงุฑ ุงูุฎุทุฉ ู AI Pro ูู ุตูุญุฉ Subscribe
2. **ุงูุชุณุฌูู:** ูููุฃ ุงูุจูุงูุงุช ุงูุดุฎุตูุฉ ูุจูุงูุงุช ุงูุฏูุน ูู Sign Up
3. **ุงูุชุฃููุฏ:** ูุฑุงุฌุน ุงูููุฎุต ููุถุบุท Confirm ูู Confirm Subscription
4. **ุงููุตูู:** ููุชูู ุฅูู Dashboard ููุจุฏุฃ ุงุณุชุฎุฏุงู ุงูุฎุฏูุฉ

**ุงููููุงุช ุงูุฃุณุงุณูุฉ:**
- `subscribe.tsx` โ ุงุฎุชูุงุฑ ุงูุฎุทุฉ
- `signup.tsx` โ ุฅูุดุงุก ุงูุญุณุงุจ ูุงูุฏูุน
- `confirm-subscription.tsx` โ ุงูุชุฃููุฏ ุงูููุงุฆู
- `dashboard.tsx` โ ุงููุตูู ุจุนุฏ ุงูุงุดุชุฑุงู

**ุงูุชุฎุฒูู:**
- `AsyncStorage` โ ุจูุงูุงุช ูุคูุชุฉ ุจูู ุงูุตูุญุงุช
- `Firestore` โ ุจูุงูุงุช ุฏุงุฆูุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- `Firebase Storage` โ ุตูุฑ ุงูุนูุงุฏุฉ

**ุงูุญูุงูุฉ:**
- Guards ุนูู ูู ุตูุญุฉ (ููุน ุงููุฑุถู ูู ุงููุตูู)
- ุงูุชุญูู ูู ุงูุจูุงูุงุช ุนูู ูู ูุฑุญูุฉ
- ุชุตุฑูุญ ุงูุฃุฏูุงุฑ (Role-based Access)

---

## ๐ ููุงุญุธุงุช ุฅุถุงููุฉ

**ููุงุญุธุฉ 1:** ุงูุฃุณุนุงุฑ ูุงูููุจููุงุช ูุงุจูุฉ ููุชุบููุฑ ุจุณูููุฉ ูู ููู `src/types/subscription.ts`

**ููุงุญุธุฉ 2:** ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุญุงููุงู Mock - ูุฌุจ ุงุณุชุจุฏุงูู ุจู Cloud Function ุฃู EmailJS

**ููุงุญุธุฉ 3:** ุทุฑู ุงูุฏูุน Apple Pay ู PayPal ู Google Pay ูุญุงูุงุฉ ููุท - ุชุญุชุงุฌ ุฅูู integration ูุนูู

**ููุงุญุธุฉ 4:** ุตูุฑ ุงูุนูุงุฏุฉ ุชูุฑูุน ุฅูู Firebase Storage ุจูุฌุงุญ - ุฑุงุจุท Download URL ููุญูุธ ูู Firestore

**ููุงุญุธุฉ 5:** ูู ุฎุทุฉ ูุฌุงููุฉ (100% Coupon) ูุชู ุชุฎุทู ุงูุชุญูู ูู ุจูุงูุงุช ุงูุจุทุงูุฉ ูููุง

---

**ูุฐุง ุงูุชุญููู ูููุฑ ูุฑุฌุนุงู ุดุงููุงู ูุฃู ุชุทููุฑ ุฃู ุชูุซูู ูุณุชูุจูู.** โ

