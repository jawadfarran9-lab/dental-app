# ๐ง ุฎุทุฉ ุงูุฑุจุท ุงูุนูููุฉ - ุชุฌุฑุจุฉ ุตุงุญุจ ุงูุนูุงุฏุฉ

**ุงููุฏู:** ุฑุจุท ุฌููุน ุงูุตูุญุงุช ูุงูููุฒุงุช ุญุณุจ ุงููุฎุทุท ุงูุฐู ูุถุนุชู ุจุดูู ุตุญูุญ ููุงูู

---

## ๐ฌ ุงููุณุงุฑ ุงููุงูู (Flow):

```
1. ุดุงุดุฉ ุงูุชุฑุญูุจ
   โ
   [ุฒุฑ "ุฃูุง ูุดุชุฑู"] 
   โ
2. ุชุณุฌูู ุงูุฏุฎูู (/clinic/login)
   โโ Email + Password
   โโ ุงูุชุญูู ูู Firestore
   โโ ุนูุฏ ุงููุฌุงุญ โ /clinic
   โ
3. ููุญุฉ ุงููุฑุถู (/clinic)
   โโ ุงูููุฏุฑ: ุตูุฑุฉ + ุงุณู ุงูุนูุงุฏุฉ
   โโ 4 ุฃุฒุฑุงุฑ ุณุฑูุนุฉ:
   โ  โโ โ๏ธ Settings (with auth)
   โ  โโ ๐จโโ๏ธ Create Doctor (with auth)
   โ  โโ ๐ New Patient
   โ  โโ ๐ฌ Messages (Hub)
   โโ ุดุจูุฉ ุงููุฑุถู (Grid View)
   โโ ุดุฑูุท ุงูุฃุฒุฑุงุฑ ุงูุณููู:
      โโ Clinic
      โโ Doctor
      โโ Patient
      โโ Messages
   โ
4. ุชูุงุตูู ุงููุฑูุถ (/clinic/[patientId])
   โโ ูุนูููุงุช ุงููุฑูุถ
   โโ ุงูุฌูุณุงุช (Sessions)
   โโ ุงูุฑุณุงุฆู (Chat)
   โโ ุฅุถุงูุฉ ุฌูุณุฉ ุฌุฏูุฏุฉ
```

---

## โ ุงููููุงุช ุงูููุฌูุฏุฉ ูุงููุฑุชุจุทุฉ ูุนููุงู:

### 1๏ธโฃ **ุชุณุฌูู ุงูุฏุฎูู** โ
- **ุงูููู:** `app/clinic/login.tsx`
- **ุงูุญุงูุฉ:** ูุงูู ูุฌุงูุฒ
- **ุงูุฑุจุท:** ูู ุดุงุดุฉ ุงูุชุฑุญูุจ (`app/index.tsx`)
  - ุงูุฒุฑ: "ุฃูุง ูุดุชุฑู" โ ูุนููู role='clinicOwner' โ ููุฌู ุฅูู `/clinic/setup`
  - ููู ุงููุณุชุฎุฏู ุงูููุฌูุฏ ูุฐูุจ ูุจุงุดุฑุฉ ุฅูู `/clinic/login` (ุตุญูุญ)

### 2๏ธโฃ **ููุญุฉ ุงููุฑุถู ุงูุฑุฆูุณูุฉ** โ
- **ุงูููู:** `app/clinic/index.tsx`
- **ุงูุญุงูุฉ:** ูุงูู ูุฌุงูุฒ
- **ูุญุชูู ุนูู:**
  - โ Hero header ูุน ุตูุฑุฉ ูุงุณู
  - โ 4 ุฃุฒุฑุงุฑ ุณุฑูุนุฉ (New Patient, Messages, Team, Settings)
  - โ ุดุจูุฉ ุงููุฑุถู
  - โ filter ูููุฑุถู ุงูููู
  - โ logout button

### 3๏ธโฃ **ุฅูุดุงุก ูุฑูุถ ุฌุฏูุฏ** โ
- **ุงูููู:** `app/clinic/create.tsx`
- **ุงูุญุงูุฉ:** ูุงูู ูุฌุงูุฒ
- **ุงูุฑุจุท:** ุงูุฒุฑ ูู `index.tsx` ุงูุณุทุฑ 364 โ `/clinic/create`

### 4๏ธโฃ **ุชูุงุตูู ุงููุฑูุถ ูุงูุฌูุณุงุช** โ
- **ุงูููู:** `app/clinic/[patientId].tsx`
- **ุงูุญุงูุฉ:** ูุงูู ุฌุฏุงู (800+ ุณุทุฑ)
- **ูุญุชูู ุนูู:**
  - โ ูุนูููุงุช ุงููุฑูุถ
  - โ ุฌูุณุงุช ูุน ุงูุตูุฑ
  - โ ุฑุณุงุฆู (Chat)
  - โ ุฅุถุงูุฉ ุฌูุณุฉ ุฌุฏูุฏุฉ
  - โ ุชุญุฑูุฑ ูุนูููุงุช ุงูุฌูุณุฉ
  - โ ุชุตููุฑ (Imaging)

### 5๏ธโฃ **ุฅุฏุงุฑุฉ ุงููุฑูู** โ
- **ุงูููู:** `app/clinic/team.tsx`
- **ุงูุญุงูุฉ:** ูุงูู ุฌุฏุงู (419 ุณุทุฑ)
- **ุงูุฑุจุท:** ุงูุฒุฑ ูู `index.tsx` ุงูุณุทุฑ 372 โ `/clinic/team`
- **ุงูููุฒุงุช:**
  - โ ุฏุนูุฉ ุฃุนุถุงุก ุฌุฏุฏ
  - โ ุชุบููุฑ ุงูุฃุฏูุงุฑ
  - โ ุฅุฏุงุฑุฉ ุงูุฏุนูุงุช

### 6๏ธโฃ **ุฅุนุฏุงุฏุงุช ุงูุนูุงุฏุฉ** โ
- **ุงูููู:** `app/clinic/settings.tsx`
- **ุงูุญุงูุฉ:** ูุงูู ุฌุฏุงู (660 ุณุทุฑ)
- **ุงูุฑุจุท:** ุงูุฒุฑ ูู `index.tsx` ุงูุณุทุฑ 381 โ `/clinic/settings`
- **ุงูููุฒุงุช:**
  - โ ุชุนุฏูู ุตูุฑุฉ ุงูุนูุงุฏุฉ
  - โ ุชุนุฏูู ุงุณู ุงูุนูุงุฏุฉ
  - โ ุงูุฃููุงู ูุงูุนูุงูุฉ ุงูุชุฌุงุฑูุฉ
  - โ ูุนูููุงุช ุงูุชูุงุตู

### 7๏ธโฃ **ูุธุงู ุงูุฑุณุงุฆู** โ๏ธ
- **ุงูููู:** `app/clinic/messages.tsx` (ุฌุฒุก) + `app/clinic/[patientId].tsx` (ุฌุฒุก)
- **ุงูุญุงูุฉ:** ุฌุฒุฆูุฉ - ูุญุชุงุฌ ุชุญุณูู
- **ุงููุดููุฉ:** 
  - ููู `messages.tsx` ุจู ุจูุงูุงุช mock ููุท
  - ุงูููุทู ุงูุญูููู ูู `[patientId].tsx` ุงูุณุทูุฑ 80-83

---

## โ๏ธ ุงููููุงุช ุงูุชู ุชุญุชุงุฌ ุฑุจุท/ุชุญุณูู:

### ๐ด ุตูุญุฉ ุงูุฑุณุงุฆู (Messages Hub) - ุงูุฃููููุฉ 1:
```
ุงููุดููุฉ:
- ุงูููู: app/clinic/messages.tsx (29 ุณุทุฑ ููุท)
- ูุญุชูู ุนูู ุจูุงูุงุช mock ููุท
- ูุง ูุนุฑุถ ูุญุงุฏุซุงุช ุญููููุฉ ูุน ุงููุฑุถู

ุงูุญู:
โ ูุฌุจ ุงูุงุณุชุนูุงู ุนู ุฌููุน ุงููุฑุถู
โ ููู ูุฑูุถ โ ุงุณุชุนูุงู ุนู ุขุฎุฑ ุฑุณุงูุฉ
โ ุนุฑุถ ุนุฏุฏ ุงูุฑุณุงุฆู ุบูุฑ ุงูููุฑูุกุฉ
โ ุนูุฏ ุงูุถุบุท โ ูุชุญ ุงููุญุงุฏุซุฉ (/clinic/[patientId]?tab=chat)

ุงูููุฏ ุงููุทููุจ:
- ุงุณุชุนูุงู Firestore: collection('patients') where clinicId = current
- ููู ูุฑูุถ: collection('patients/{patientId}/messages') orderBy('createdAt', 'desc').limit(1)
- ุญุณุงุจ ุบูุฑ ุงูููุฑูุกุฉ: where('readByClinic', '==', false)
```

### ๐ก ุงูุฃุฒุฑุงุฑ ุงูุซูุงุซุฉ ูู ุงูุฑุฃุณ - ุงูุฃููููุฉ 2:
```
ุงููุดููุฉ:
- ุงูุฒุฑ "Settings" (ุงููุณุงุฑ) ููุฌูุฏ ููู ุจุฏูู ุชุญูู ูู ูููุฉ ุงููุฑูุฑ
- ุงูุฒุฑ "Create Doctor" (ุงููุณุท) ูุง ููุฌุฏ! ูุฌุจ ุฅุถุงูุชู
- ุงูุฒุฑ "New Patient" (ุงููููู) ููุฌูุฏ โ

ุงูุญู:
1. ุฅุถุงูุฉ ุดุงุดุฉ ุชุญูู ูู ูููุฉ ุงููุฑูุฑ (Auth Modal)
   - ูุธูุฑ ูุจู ุงูุฏุฎูู ูู Settings ุฃู Create Doctor
   - ูุทูุจ ุฅุนุงุฏุฉ ุฅุฏุฎุงู ูููุฉ ูุฑูุฑ ุงูุนูุงุฏุฉ

2. ุฅูุดุงุก ููู ุฌุฏูุฏ: app/clinic/create-doctor.tsx
   - ุดุงุดุฉ ูุฅูุดุงุก ุญุณุงุจ ุฏูุชูุฑ ุฌุฏูุฏ
   - ุฃู ุงุณุชุฎุฏุงู team.tsx ูุจุงุดุฑุฉ (ุฃุณูู)

3. ุชุฑุชูุจ ุงูุฃุฒุฑุงุฑ ุงูุซูุงุซุฉ:
   [โ๏ธ Settings] [๐จโโ๏ธ Doctor] [๐ Patient]
   ุฃู ูู ุตู ูุงุญุฏ ุฃู ุตููู ุญุณุจ ุงูุชุตููู
```

### ๐ก ุตูุฑุฉ ุงูุนูุงุฏุฉ ูู ุงูุฑุฃุณ - ุงูุฃููููุฉ 3:
```
ุงููุดููุฉ:
- Hero image ููุฌูุฏ ููู ูุฏ ูุง ูุนุฑุถ ุตูุฑุฉ ุงูุนูุงุฏุฉ ุงูุญููููุฉ
- ูุณุชุฎุฏู getHeroImage() ุงูุซุงุจุชุฉ

ุงูุญู:
- ุงูุชุญูู ูู ClinicSettings ูู Firestore
- ุฌูุจ clinicSettings.logoUrl ุฃู heroImageUrl
- ุฅุฐุง ูุง ุชูุฌุฏ โ ุงุณุชุฎุฏู ุงูุตูุฑุฉ ุงูุงูุชุฑุงุถูุฉ

ุงูููุฏ ูู index.tsx ุงูุณุทุฑ ~330:
```tsx
<ImageBackground
  source={{ uri: clinicData.heroImageUrl || getHeroImage('clinic', isDark) }}
  style={styles.hero}
/>
```
```

### ๐ก ุดุฑูุท ุงูุฃุฒุฑุงุฑ ุงูุณููู - ุงูุฃููููุฉ 3:
```
ุงููุดููุฉ:
- ูุฌุจ ุฅุถุงูุฉ ุดุฑูุท 4 ุฃุฒุฑุงุฑ ูู ุฃุณูู ููุญุฉ ุงููุฑุถู:
  [Clinic] [Doctor] [Patient] [Messages]

ุงูุญู:
- ุฅุถุงูุฉ View ูู ุฃุณูู FlatList
- ูู ุฒุฑ ููุฌู ุฅูู ุงูุตูุญุฉ ุงูููุงุณุจุฉ ุฃู ูุตูู ุงูุนุฑุถ
```

---

## ๐ ุงูุญูุงูุฉ ูุงููุตุงุฏูุฉ:

### ุงูููุฌูุฏ โ:
- `useClinicGuard()` ูู ุฌููุน ุตูุญุงุช ุงูุนูุงุฏุฉ
- `useClinicRoleGuard(['OWNER_ADMIN'])` ูู Team ู Settings

### ุงูููููุฏ โ:
- **Authentication Prompt** ูุจู:
  1. ูุชุญ ุงูุฅุนุฏุงุฏุงุช (Settings)
  2. ุฅูุดุงุก ุญุณุงุจ ุฏูุชูุฑ ุฌุฏูุฏ
  3. ุชุบููุฑ ุจูุงูุงุช ุงูุนูุงุฏุฉ ุงูุญุณุงุณุฉ

### ุงูุญู:
```tsx
// ุฅูุดุงุก Auth Modal Component
const AuthPromptModal = ({ visible, onSuccess, onCancel }) => {
  return (
    <Modal visible={visible}>
      <Text>ุชุญูู ูู ูููุฉ ุงููุฑูุฑ</Text>
      <TextInput placeholder="ูููุฉ ุงููุฑูุฑ" />
      <Button onPress={onSuccess} title="ุชุญูู" />
      <Button onPress={onCancel} title="ุฅูุบุงุก" />
    </Modal>
  );
};

// ูู Settings ุฃู Create Doctor:
const [authPromptVisible, setAuthPromptVisible] = useState(false);

const handleSettingsPress = () => {
  setAuthPromptVisible(true);
};

const handleAuthSuccess = (password) => {
  // ุงูุชุญูู ูู ูููุฉ ุงููุฑูุฑ
  // ุฅุฐุง ุตุญูุญุฉ โ ูุชุญ ุงูุตูุญุฉ
  // ุฅุฐุง ุฎุงุทุฆุฉ โ ุนุฑุถ ุฎุทุฃ
};
```

---

## ๐ ุญุงูุฉ ุงูุฑุจุท ุงูุญุงููุฉ:

| ุงููููู | ุงูุญุงูุฉ | ุงูููู | ุงูุณุทุฑ |
|-------|--------|------|------|
| ุชุณุฌูู ุงูุฏุฎูู | โ ูุงูู | login.tsx | 246 |
| ููุญุฉ ุงููุฑุถู | โ ูุงูู | index.tsx | 565 |
| ุฅูุดุงุก ูุฑูุถ | โ ูุงูู | create.tsx | 273 |
| ุชูุงุตูู ุงููุฑูุถ | โ ูุงูู | [patientId].tsx | 800+ |
| ุฅุฏุงุฑุฉ ุงููุฑูู | โ ูุงูู | team.tsx | 419 |
| ุฅุนุฏุงุฏุงุช | โ ูุงูู | settings.tsx | 660 |
| ุงูุฑุณุงุฆู | โ๏ธ ุฌุฒุฆู | messages.tsx | 29 |
| ุชุญูู ูู ูููุฉ ุงููุฑูุฑ | โ ููููุฏ | - | - |
| ุฅูุดุงุก ุฏูุชูุฑ | โ๏ธ ููุฌูุฏ ูู team.tsx | team.tsx | 419 |

---

## ๐ฏ ุงูุฎุทูุงุช ุงูุชุงููุฉ:

### ุงูุฎุทูุฉ 1: ุชุญุณูู ุตูุญุฉ ุงูุฑุณุงุฆู
- ุฑุจุท `app/clinic/messages.tsx` ุจู Firestore
- ุนุฑุถ ูุญุงุฏุซุงุช ุญููููุฉ ูุน ุงููุฑุถู
- ุงูุณุงุนุฉ ุงููุชููุนุฉ: **1-2 ุณุงุนุฉ**

### ุงูุฎุทูุฉ 2: ุฅุถุงูุฉ ุชุญูู ูู ูููุฉ ุงููุฑูุฑ
- ุฅูุดุงุก Auth Modal Component
- ุฅุถุงูุชู ูุจู Settings ู Create Doctor
- ุงูุณุงุนุฉ ุงููุชููุนุฉ: **1 ุณุงุนุฉ**

### ุงูุฎุทูุฉ 3: ุชุญุณูู ูุงุฌูุฉ ุงูุฃุฒุฑุงุฑ
- ุชุฑุชูุจ ุฃูุถู ููุฃุฒุฑุงุฑ ุงูุซูุงุซุฉ
- ุดุฑูุท ุฃุฒุฑุงุฑ ุณููู (ุงุฎุชูุงุฑู)
- ุงูุณุงุนุฉ ุงููุชููุนุฉ: **30-45 ุฏูููุฉ**

### ุงูุฎุทูุฉ 4: ุงุฎุชุจุงุฑ ุดุงูู
- ุงุฎุชุจุงุฑ ูุงูู ุงููุณุงุฑ ูู ุงูุชุฑุญูุจ ุฅูู ุงูุฌูุณุงุช
- ุงุฎุชุจุงุฑ ุงูุญูุงูุฉ ูุงูุตูุงุญูุงุช
- ุงูุณุงุนุฉ ุงููุชููุนุฉ: **30-45 ุฏูููุฉ**

